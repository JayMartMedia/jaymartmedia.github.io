"use strict";(self.webpackChunkjaymartmedia=self.webpackChunkjaymartmedia||[]).push([[791],{6242:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>h});var a=t(5893),i=t(1151);const r={slug:"web-scraping-with-php",title:"Web Scraping with PHP",authors:"jaymartin",tags:["PHP"]},o="Web Scraping With PHP",s={permalink:"/blog/web-scraping-with-php",editUrl:"https://github.com/jaymartmedia/jaymartmedia.github.io/tree/main/blog/2019-03-20-php-web-scraping.mdx",source:"@site/blog/2019-03-20-php-web-scraping.mdx",title:"Web Scraping with PHP",description:"In this article I will be showing you how to use PHP to scrape a web page. This article assumes that you have a basic understanding of PHP and programming concepts, and that you have access to a server capable of running PHP. If you do not have access to a server capable of running PHP, you can install WAMP on Windows 10 by watching my installation video. In a way, scraping involves reverse engineering a web page so it helps to be familiar with HTML.",date:"2019-03-20T00:00:00.000Z",formattedDate:"March 20, 2019",tags:[{label:"PHP",permalink:"/blog/tags/php"}],readingTime:3.45,hasTruncateMarker:!0,authors:[{name:"Jay Martin",title:"Runner of JayMartMedia",url:"https://github.com/jaymartmedia",imageURL:"https://github.com/jaymartmedia.png",key:"jaymartin"}],frontMatter:{slug:"web-scraping-with-php",title:"Web Scraping with PHP",authors:"jaymartin",tags:["PHP"]},unlisted:!1,prevItem:{title:"Multistream with OBS and FFMPEG",permalink:"/blog/multistream-ffmpeg"},nextItem:{title:"Input validation with Java",permalink:"/blog/input-validation-with-java"}},l={authorsImageUrls:[void 0]},h=[{value:"Installing the Library",id:"installing-the-library",level:2},{value:"Writing the Scraping Code",id:"writing-the-scraping-code",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["In this article I will be showing you how to use PHP to scrape a web page. This article assumes that you have a basic understanding of PHP and programming concepts, and that you have access to a server capable of running PHP. If you do not have access to a server capable of running PHP, you can ",(0,a.jsx)(n.a,{href:"/articles/legacy/wamp-server/",children:"install WAMP on Windows 10 by watching my installation video"}),". In a way, scraping involves reverse engineering a web page so it helps to be familiar with HTML."]}),"\n",(0,a.jsx)("link",{rel:"stylesheet",href:"/legacy/jmm-video.css"}),"\n",(0,a.jsx)("div",{class:"jmm-video-container",children:(0,a.jsx)("iframe",{class:"jmm-video",src:"https://www.youtube.com/embed/Uc5mfudMTKE",frameborder:"0",allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["I have written this article in text form in order to save you time. In my experience, reading an article is often faster and/or more convenient (certainly quieter) than watching a video. If you would prefer to view this information in video form, you can click the video above, or ",(0,a.jsx)(n.a,{href:"https://www.youtube.com/watch?v=Uc5mfudMTKE",children:"view the video on YouTube"}),"."]})}),"\n",(0,a.jsx)(n.p,{children:"Although there are other ways to scrape a web page with PHP, this article will focus on the Simple HTML DOM Parser. I have chosen to use this library because this is the library that I have experiance with and it is easy to use with great documentation."}),"\n",(0,a.jsxs)(n.admonition,{title:"Disclaimer",type:"danger",children:[(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Do not wep scrape maliciously."}),"\n",(0,a.jsx)(n.li,{children:"Do not scrape to steal data."}),"\n"]}),(0,a.jsx)(n.p,{children:"YOU are responsible for anything you do with the skills you learn in this article and/or video."})]}),"\n",(0,a.jsx)(n.h2,{id:"installing-the-library",children:"Installing the Library"}),"\n",(0,a.jsxs)(n.p,{children:["The first thing you need to do is download the scraping library from SourceForge. You can do this by going to ",(0,a.jsx)(n.a,{href:"http://simplehtmldom.sourceforge.net/",children:"http://simplehtmldom.sourceforge.net/"}),' and clicking on "Download latest version from SourceForge".']}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Screenshot of simple html dom scraper in sourceforge",src:t(4058).Z+"",width:"1263",height:"1272"})}),"\n",(0,a.jsx)(n.p,{children:'Once you have downloaded the library from SourceForge, unzip the compressed folder. Then move the "simple_html_dom.php" file to the folder that you will be building the web scraper in.'}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Screenshot of unzipping library",src:t(892).Z+"",width:"1072",height:"232"})}),"\n",(0,a.jsx)(n.h2,{id:"writing-the-scraping-code",children:"Writing the Scraping Code"}),"\n",(0,a.jsx)(n.p,{children:"Now that we have our library installed we can begin writing our scraping code."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"<?php\n   # This imports and gives us access to the scraping library\n   include('simple_html_dom.php');\n?>\n"})}),"\n",(0,a.jsx)(n.p,{children:"Now that we have access to the scraping library, we can use the file_get_html function to create a DOM object from a url."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"<?php\n   # This imports and gives us access to the scraping library\n   include('simple_html_dom.php');\n   \n   # Create HTML DOM object from url\n   $html = file_get_html('https://google.com');\n?>\n"})}),"\n",(0,a.jsx)(n.p,{children:"We can then pull specific elements from this DOM object by calling the find method and passing in the tag name of the element we would like to grab. We can also pass an index if we would like to grab only a single instance of a particular tag. If we want to grab an array of tags, we refrain from passing an index."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"# Create HTML DOM object from url\n$html = file_get_html('https://google.com');\n   \n# Gets the 0th title element from the DOM object and echos it to the webpage\necho $html->find('title',0);\n   \n# If we don't pass an index we can get an array of all the anchor elements from the DOM object\n$array_of_anchors = $html->find('a');\n   \n# We can echo all of the anchor elements from the array above by using a simple for loop\nfor( $i = 0; $i < sizeof($list_of_anchors); $i++ ){\n   # echo each anchor by using the $i iterator to pull the anchor in each index position\n   echo $list_of_anchors[$i];\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"In addition to selecting elements based on their tag name, we can select elements based on class or ID."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$html = file_get_html('https://google.com');\n    \n$array_of_hidden_divs = $html->find('div[class=\"hidden\"]');\n    \n$array_of_thumbnails = $html->find('img[id=\"thumbnail\"]');\n"})}),"\n",(0,a.jsx)(n.p,{children:"The find method returns a DOM object. This means that we can call the find method on itself to grab child elements."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$html = file_get_html('https://google.com');\n   \n$ul = $html->find('ul',0);\n   \n$array_of_li = $ul->find('li');\n   \n# This is the same as above, but in a single line\n$array_of_li = $html->find('ul',0)->find('li');\n"})}),"\n",(0,a.jsx)(n.p,{children:"We can extract certain data such as the text of an element, or the hyperlink reference of an anchor tag, or the source of an image."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$html = file_get_html('https://google.com');\n    \n$button_text = $html->find('button',0)->plaintext;\n \n$anchor_href = $html->find('a',0)->href;\n \n$image_source = $html->find('img',0)->src;\n"})})]})}function d(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},4058:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/simple-html-dom-sourceforge-3ab5e54f54828118440c770fc454abfb.jpg"},892:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/unzip-library-f57079f0d37168a37d6dd85590c4bcc8.jpg"},1151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>o});var a=t(7294);const i={},r=a.createContext(i);function o(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);